{"version":3,"file":"/scripts/growtype-form-render.js","mappings":"YAKA,SAASA,EAAmBC,GACxBA,EAAcC,OAAM,SAAUC,GAC1BA,EAAEC,iBAEF,IAAIC,EAAsBC,EAAE,sCACxBC,EAAeD,EAAEE,MAAMC,QAAQ,oBAC/BC,EAAoBL,EAAoBM,QACxCC,EAASL,EAAaM,KAAK,gBAC3BC,EAAYC,SAASH,GAAU,EAEnC,GAAIL,EAAaE,QAAQ,cAAcO,SAAS,0BAA2B,CAIvE,IAAIC,EAAYV,EAAaE,QAAQ,cAAcI,KAAK,cASxD,OARAP,EAAE,0BAA4BW,EAAY,MACrCC,KAAK,6CACLL,KAAK,gBAAiB,SACtBK,KAAK,SAASC,KAAK,WAAW,GAEnCZ,EAAaE,QAAQ,cAAcW,YAAY,0BAC/Cb,EAAaW,KAAK,eAAeG,OACjCd,EAAaW,KAAK,YAAYI,QACvB,EAMXhB,EAAEE,MAAMC,QAAQ,gBAAgBa,OAEhCZ,EAAkBY,OAClBZ,EAAkBa,YAAYhB,GAC9BG,EAAkBQ,KAAK,eAAeG,OACtCX,EAAkBQ,KAAK,gBAAgBG,OACvCX,EAAkBQ,KAAK,cAAcM,KAAKV,GAC1CJ,EAAkBG,KAAK,eAAgBC,GAKvCJ,EAAkBQ,KAAK,qBAAqBO,SAC5Cf,EAAkBQ,KAAK,eAAeO,SACtCf,EAAkBQ,KAAK,UAAUE,YAAY,SAC7CV,EAAkBQ,KAAK,SAASQ,IAAI,IACpChB,EAAkBQ,KAAK,UAAUQ,IAAI,IAKrCC,EAAiBtB,EAAqBK,EAAmBI,GAKzDJ,EAAkBQ,KAAK,UAAUU,OAAOC,OAAOC,YAK/CpB,EAAkBqB,SAKlB/B,EAAmBU,EAAkBQ,KAAK,cAC1Cc,EAAmBtB,EAAkBQ,KAAK,mBASlD,SAASS,EAAiBtB,EAAqBK,EAAmBI,GAC9DT,EAAoBa,KAAK,cAAce,KAAI,SAAUC,EAAOC,GACxD,IAAIC,EAAY9B,EAAE6B,GAAStB,KAAK,aAChC,QAAyB,IAAduB,GAA6BA,EAAUC,OAAS,EAAG,CAC1D,IAAIC,EAAU,GAGVA,EAF2B,OAA3BF,EAAUG,MAAM,QAChBH,EAAYA,EAAUI,MAAM,MACR,GAAK,IAAM1B,EAAY,IAAMsB,EAAU,GAEjDA,EAAY,IAAMtB,EAGhC,IAAI2B,EAAQnC,EAAEI,EAAkBQ,KAAK,OAAOgB,EAAQ,IACpDO,EAAM5B,KAAK,YAAayB,GACxBG,EAAMvB,KAAK,SAASL,KAAK,MAAOyB,GAChCG,EAAMvB,KAAK,iBACNL,KAAK,OAAQyB,GACbzB,KAAK,KAAMyB,GAChBG,EAAMvB,KAAK,UACNL,KAAK,OAAQyB,GACbzB,KAAK,KAAMyB,OAQ5B,SAASN,EAAmBU,GACxBA,EAAUxC,OAAM,WACZ,IAAIK,EAAeD,EAAEE,MAAMC,QAAQ,oBAEnC,GAA0C,MAAtCF,EAAaM,KAAK,gBAAyB,CAI3C,IAAII,EAAYV,EAAaE,QAAQ,cAAcI,KAAK,cAKxD,OAJAP,EAAE,0BAA4BW,EAAY,MAAMC,KAAK,8CAA8CL,KAAK,gBAAiB,QAEzHN,EAAaE,QAAQ,cAAckC,SAAS,0BAC5CpC,EAAaW,KAAK,YAAYa,UACvB,EAGPxB,EAAaW,KAAK,wBAAwBmB,OAAS,EACnD9B,EAAaqC,UAAUC,UAAUC,MAAK,WAClCvC,EAAawC,KAAK,oBAAoB7B,KAAK,gBAAgBa,SAC3DzB,EAAEE,MAAMiB,YAGZlB,EAAaqC,UAAUC,UAAUC,MAAK,WAClCxC,EAAEE,MAAMiB,SACRnB,EAAE,oBAAoB0C,IAAI,sBAAsBf,KAAI,SAAUC,EAAOC,GACjE,IAAIvB,EAASsB,EAAQ,EACrB5B,EAAE6B,GAAStB,KAAK,eAAgBD,GAC3BM,KAAK,cACLI,OACAE,KAAKZ,GACLmB,SACLJ,EAAiBrB,EAAE,sCAAuCA,EAAE6B,GAAUvB,YA3I1FN,EAAI2C,OAqJJ3C,EAAE,YAAY4C,OAAM,WA4ChB,GA3CAlD,EAAmBM,EAAE,+BACrB0B,EAAmB1B,EAAE,gBAKrBA,EAAE,mBAAmB6C,MAAK,WACtB,IAAIC,EAAiE,oBAArCC,gCAAmDA,gCAAkC,GACjHC,EAAY,GAEhB,GAAIC,OAAOC,QAAQJ,GAAmBf,OAAS,EAAG,CAC9C,IAAIoB,EAAiBC,KAAKC,MAAMP,EAAkBE,WAE9CC,OAAOC,QAAQC,GAAgBpB,OAAS,IACxCiB,EAAYG,GAIpBnD,EAAEE,MAAMoD,cAAc,CAClBN,UAAWA,EACXO,gBAAiBvD,EAAEE,MAAMK,KAAK,aAC9BiD,WAAYxD,EAAEE,MAAMK,KAAK,mBAAmB2B,MAAM,KAClDuB,QAASzD,EAAEE,MAAMK,KAAK,sBAO1BP,EAAE,eAAe+B,OAAS,GAC1B/B,EAAE,eAAe0D,aAMjB1D,EAAE,eAAe+B,OAAS,GAC1B/B,EAAE,eAAe2D,aAMjB3D,EAAE,mBAAmB+B,OAAS,EAAG,KAOxB6B,EAAT,SAAuBC,EAAOC,GAC1B,IAAIC,EAAcC,KAAKX,MAAMS,GAC7B,IACI,GAAIG,MAAMF,GACN,MAAM,KAEV/D,EAAE0D,WAAWQ,UAAUC,EAAYL,GACrC,MAAOjE,GACLgE,EAAMzC,IAAI,MAdZgD,EAAO,IAAIJ,KACbK,EAAOD,EAAKE,WACZC,EAASH,EAAKI,aAEdL,EAAaM,6BAA6BC,YAc1CC,EAAmB,IAAIX,KAC3BW,EAAiBC,QAAQD,EAAiBE,UAAY,GACtDF,EAAiBG,qBAEjB9E,EAAE,mBAAmB+E,eAAe,CAChCC,SAAU,KACVC,YAAab,EACbD,WAAYA,EACZe,eAAgB,EAChBb,KAAMA,EACNE,OAAQA,EACRY,QAASR,EACTS,QAAS,SAAUtB,EAAUuB,GACzB,GAA6B,wBAAzBrF,EAAEE,MAAMK,KAAK,QAAmC,CAChD,IAAI+E,EAAiB,IAAItB,KAAKF,GAC9BwB,EAAeV,QAAQU,EAAeT,UAAY,GAClDS,EAAeR,qBACf9E,EAAE,6CAA6C+E,eAAe,SAAU,UAAWO,GAEvF1B,EAAc5D,EAAEE,MAAO4D,IAE3ByB,aAAc,SAAUzB,EAAUuB,GAC9BzB,EAAc5D,EAAEE,MAAO4D,IAE3B0B,iBAAkB,SAAU1B,EAAUuB,GAClCzB,EAAc5D,EAAEE,MAAO4D,MAQ/B9D,EAAE,gBAAgB+B,OAAS,GAC3B/B,EAAE,gBAAgByF,YAAY,OAAQ,CAClCC,kBAAkB,EAClBC,oBAAqBC,gBAAgBD,oBACrCE,iBAAkBD,gBAAgBC,iBAClCC,eAAgBF,gBAAgBE,eAChCC,wBAAyBH,gBAAgBG,wBACzCC,sBAAuBJ,gBAAgBI,sBACvCC,cAAc,EACdC,mBAAoB,QACpBC,aAAc,IAOtBnG,EAAE,8BAA8BJ,OAAM,WAClC,IAAIwG,EAAOpG,EAAEE,MAAMK,KAAK,aACpB8F,EAAKrG,EAAEE,MAAMK,KAAK,WAClB+F,EAAOtG,EAAEE,MAAMK,KAAK,aACpBgG,EAASvG,EAAEE,MAAMK,KAAK,eACtBiG,EAAWxG,EAAEE,MAAMK,KAAK,iBAC5BP,EAAEE,MAAMC,QAAQ,uBAAuBa,OACvChB,EAAEE,MAAMC,QAAQ,cAAcsG,OAAO,gBAAkBL,EAAO,SAAWC,EAAK,WAAaC,EAAO,cAAgBC,EAAS,MAAQC,EAAW,W","sources":["webpack://sage/./resources/scripts/growtype-form-render.js"],"sourcesContent":["$ = jQuery;\n\n/**\n * @param $duplicateBtn\n */\nfunction cloneReapeaterForm($duplicateBtn) {\n    $duplicateBtn.click(function (e) {\n        e.preventDefault();\n\n        let initialRepeaterForm = $('.repeater-fields[data-form-nr=\"1\"]');\n        let repeaterForm = $(this).closest('.repeater-fields');\n        let repeaterFormClone = initialRepeaterForm.clone();\n        let formNr = repeaterForm.attr('data-form-nr');\n        let newFormNr = parseInt(formNr) + 1;\n\n        if (repeaterForm.closest('.b-wrapper').hasClass('repeater-fields-folded')) {\n            /**\n             * Remove closest form group validation\n             */\n            let blockName = repeaterForm.closest('.b-wrapper').attr('data-group');\n            $('.b-wrapper[data-group=\"' + blockName + '\"]')\n                .find('.form-check-wrapper[aria-required=\"true\"]')\n                .attr('aria-required', 'false')\n                .find('input').prop('checked', false);\n\n            repeaterForm.closest('.b-wrapper').removeClass('repeater-fields-folded');\n            repeaterForm.find('.btn-remove').show();\n            repeaterForm.find('.btn-add').hide();\n            return false;\n        }\n\n        /**\n         * Hide duplicate btn in previous form\n         */\n        $(this).closest('.btn-wrapper').hide();\n\n        repeaterFormClone.hide();\n        repeaterFormClone.insertAfter(repeaterForm)\n        repeaterFormClone.find('.btn-remove').show();\n        repeaterFormClone.find('.btn-wrapper').show();\n        repeaterFormClone.find('.e-counter').text(newFormNr);\n        repeaterFormClone.attr('data-form-nr', newFormNr);\n\n        /**\n         * Reset cloned form\n         */\n        repeaterFormClone.find('.chosen-container').remove();\n        repeaterFormClone.find('label.error').remove();\n        repeaterFormClone.find('.error').removeClass('error');\n        repeaterFormClone.find('input').val('');\n        repeaterFormClone.find('select').val('');\n\n        /**\n         * Rename cloned form\n         */\n        renameClonedForm(initialRepeaterForm, repeaterFormClone, newFormNr);\n\n        /**\n         *\n         */\n        repeaterFormClone.find('select').chosen(window.selectArgs);\n\n        /**\n         * Show cloned form\n         */\n        repeaterFormClone.fadeIn();\n\n        /**\n         * Reinitiate method\n         */\n        cloneReapeaterForm(repeaterFormClone.find('a.btn-add'));\n        removeRepeaterForm(repeaterFormClone.find('.btn-remove'));\n    });\n}\n\n/**\n *\n * @param repeaterFormClone\n * @param newFormNr\n */\nfunction renameClonedForm(initialRepeaterForm, repeaterFormClone, newFormNr) {\n    initialRepeaterForm.find('.e-wrapper').map(function (index, element) {\n        let groupName = $(element).attr('data-name');\n        if (typeof groupName !== 'undefined' && groupName.length > 0) {\n            let newName = '';\n            if (groupName.match(/\\[/g) !== null) {\n                groupName = groupName.split(\"[\")\n                newName = groupName[0] + '_' + newFormNr + '[' + groupName[1];\n            } else {\n                newName = groupName + '_' + newFormNr;\n            }\n\n            let field = $(repeaterFormClone.find('div')[index + 1]);\n            field.attr('data-name', newName);\n            field.find('label').attr('for', newName)\n            field.find('.form-control')\n                .attr('name', newName)\n                .attr('id', newName)\n            field.find('select')\n                .attr('name', newName)\n                .attr('id', newName)\n        }\n    });\n}\n\n/**\n *\n */\nfunction removeRepeaterForm(removeBtn) {\n    removeBtn.click(function () {\n        let repeaterForm = $(this).closest('.repeater-fields');\n\n        if (repeaterForm.attr('data-form-nr') === '1') {\n            /**\n             * Add closest form group validation\n             */\n            let blockName = repeaterForm.closest('.b-wrapper').attr('data-group');\n            $('.b-wrapper[data-group=\"' + blockName + '\"]').find('.form-check-wrapper[aria-required=\"false\"]').attr('aria-required', 'true');\n\n            repeaterForm.closest('.b-wrapper').addClass('repeater-fields-folded');\n            repeaterForm.find('.btn-add').fadeIn();\n            return false;\n        }\n\n        if (repeaterForm.find('.btn-wrapper:visible').length > 0) {\n            repeaterForm.fadeOut().promise().done(function () {\n                repeaterForm.prev('.repeater-fields').find('.btn-wrapper').fadeIn();\n                $(this).remove();\n            })\n        } else {\n            repeaterForm.fadeOut().promise().done(function () {\n                $(this).remove();\n                $('.repeater-fields').not('[data-form-nr=\"1\"]').map(function (index, element) {\n                    let formNr = index + 2;\n                    $(element).attr('data-form-nr', formNr)\n                        .find('.e-counter')\n                        .hide()\n                        .text(formNr)\n                        .fadeIn();\n                    renameClonedForm($('.repeater-fields[data-form-nr=\"1\"]'), $(element), formNr);\n                });\n            });\n        }\n    });\n}\n\n/**\n *\n */\n$('document').ready(function () {\n    cloneReapeaterForm($('.repeater-fields a.btn-add'));\n    removeRepeaterForm($('.btn-remove'));\n\n    /**\n     * Image uploader setup\n     */\n    $('.image-uploader').each(function () {\n        let image_upload_data = typeof (growtype_form_image_upload_data) !== 'undefined' ? growtype_form_image_upload_data : [];\n        let preloaded = [];\n\n        if (Object.entries(image_upload_data).length > 0) {\n            let preloaded_data = JSON.parse(image_upload_data.preloaded);\n\n            if (Object.entries(preloaded_data).length > 0) {\n                preloaded = preloaded_data;\n            }\n        }\n\n        $(this).imageUploader({\n            preloaded: preloaded,\n            imagesInputName: $(this).attr('data-name'),\n            extensions: $(this).attr('data-extensions').split(\",\"),\n            maxSize: $(this).attr('data-max-size'),\n        });\n    });\n\n    /**\n     * Set date\n     */\n    if ($(\".datepicker\").length > 0) {\n        $(\".datepicker\").datepicker();\n    }\n\n    /**\n     * Set time\n     */\n    if ($(\".timepicker\").length > 0) {\n        $('.timepicker').timepicker();\n    }\n\n    /**\n     * Set date and time pickers\n     */\n    if ($(\".datetimepicker\").length > 0) {\n        const date = new Date();\n        let hour = date.getHours();\n        let minute = date.getMinutes();\n\n        let dateFormat = growtype_form_date_time_data.date_format;\n\n        function validateValue($this, dateText) {\n            let parsedValue = Date.parse(dateText);\n            try {\n                if (isNaN(parsedValue)) {\n                    throw null;\n                }\n                $.datepicker.parseDate(dateFormat, dateText);\n            } catch (e) {\n                $this.val('')\n            }\n        }\n\n        let startDateMinDate = new Date();\n        startDateMinDate.setDate(startDateMinDate.getDate() + 1);\n        startDateMinDate.toLocaleDateString();\n\n        $('.datetimepicker').datetimepicker({\n            language: 'en',\n            defaultDate: date,\n            dateFormat: dateFormat,\n            numberOfMonths: 1,\n            hour: hour,\n            minute: minute,\n            minDate: startDateMinDate,\n            onClose: function (dateText, inst) {\n                if ($(this).attr('name') === '_auction_dates_from') {\n                    let endDateMinDate = new Date(dateText);\n                    endDateMinDate.setDate(endDateMinDate.getDate() + 1);\n                    endDateMinDate.toLocaleDateString();\n                    $('.datetimepicker[name=\"_auction_dates_to\"]').datetimepicker(\"option\", \"minDate\", endDateMinDate);\n                }\n                validateValue($(this), dateText)\n            },\n            onSelectDate: function (dateText, inst) {\n                validateValue($(this), dateText)\n            },\n            onChangeDateTime: function (dateText, inst) {\n                validateValue($(this), dateText)\n            }\n        });\n    }\n\n    /**\n     * Autonumeric\n     */\n    if ($(\".autonumeric\").length > 0) {\n        $('.autonumeric').autoNumeric('init', {\n            unformatOnSubmit: true,\n            digitGroupSeparator: autoNumericdata.digitGroupSeparator,\n            decimalCharacter: autoNumericdata.decimalCharacter,\n            currencySymbol: autoNumericdata.currencySymbol,\n            currencySymbolPlacement: autoNumericdata.currencySymbolPlacement,\n            decimalPlacesOverride: autoNumericdata.decimalPlacesOverride,\n            showWarnings: false,\n            emptyInputBehavior: 'press',\n            minimumValue: 0\n        });\n    }\n\n    /**\n     * File input\n     */\n    $('.e-wrapper .btn-img-remove').click(function () {\n        let type = $(this).attr('data-type');\n        let id = $(this).attr('data-id');\n        let name = $(this).attr('data-name');\n        let accept = $(this).attr('data-accept');\n        let required = $(this).attr('data-required');\n        $(this).closest('.input-file-wrapper').hide();\n        $(this).closest('.e-wrapper').append('<input type=\"' + type + '\" id=\"' + id + '\" name=\"' + name + '\"  accept=\"' + accept + '\"  ' + required + '>');\n    });\n});\n"],"names":["cloneReapeaterForm","$duplicateBtn","click","e","preventDefault","initialRepeaterForm","$","repeaterForm","this","closest","repeaterFormClone","clone","formNr","attr","newFormNr","parseInt","hasClass","blockName","find","prop","removeClass","show","hide","insertAfter","text","remove","val","renameClonedForm","chosen","window","selectArgs","fadeIn","removeRepeaterForm","map","index","element","groupName","length","newName","match","split","field","removeBtn","addClass","fadeOut","promise","done","prev","not","jQuery","ready","each","image_upload_data","growtype_form_image_upload_data","preloaded","Object","entries","preloaded_data","JSON","parse","imageUploader","imagesInputName","extensions","maxSize","datepicker","timepicker","validateValue","$this","dateText","parsedValue","Date","isNaN","parseDate","dateFormat","date","hour","getHours","minute","getMinutes","growtype_form_date_time_data","date_format","startDateMinDate","setDate","getDate","toLocaleDateString","datetimepicker","language","defaultDate","numberOfMonths","minDate","onClose","inst","endDateMinDate","onSelectDate","onChangeDateTime","autoNumeric","unformatOnSubmit","digitGroupSeparator","autoNumericdata","decimalCharacter","currencySymbol","currencySymbolPlacement","decimalPlacesOverride","showWarnings","emptyInputBehavior","minimumValue","type","id","name","accept","required","append"],"sourceRoot":""}
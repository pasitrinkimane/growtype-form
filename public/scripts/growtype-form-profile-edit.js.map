{"version":3,"file":"/scripts/growtype-form-profile-edit.js","mappings":"AAAAA,OAAOC,UAAUC,OAAM,SAAUC,GAC7BA,EAAE,qCAAqCC,GAAG,UAAU,WAChD,IAAIC,EAAW,IAAIC,SAEnBD,EAASE,OAAO,SAAUC,sBAAsBC,QAChDJ,EAASE,OAAO,WAAYC,sBAAsBE,OAElD,IAAIC,EAAQC,KACRC,EAAYV,EAAES,MAAME,KAAK,SAAW,QAEpCH,EAAMI,OAASJ,EAAMI,MAAMC,OAAS,GAEpCb,EAAEc,KAAKN,EAAMI,OAAO,SAAUG,EAAGC,GACzBN,EAAUO,SAAS,MACnBf,EAASE,OAAOM,EAAWM,GAE3Bd,EAASE,OAAOM,EAAY,KAAMM,EAG1C,IAGJhB,EAAEkB,KAAK,CACHC,IAAKd,sBAAsBe,QAC3BC,KAAM,OACNC,KAAMpB,EACNqB,aAAa,EACbC,aAAa,EACbC,QAAS,SAAUC,GACXA,EAASD,QACTE,SAASC,SAETC,MAAMH,EAAe,KAAW,QAExC,EACAI,MAAO,WACHD,MAAM,2CACV,GAGR,IAGA7B,EAAE,uCAAuCC,GAAG,SAAS,SAAU8B,GAC3DA,EAAEC,iBACFD,EAAEE,kBAEEC,QAAQ,wDACRlC,EAAEkB,KAAK,CACHC,IAAKd,sBAAsBe,QAC3BC,KAAM,OACNC,KAAM,CACFhB,OAAQ,uCACR6B,SAAU9B,sBAAsBE,OAEpCkB,QAAS,SAAUC,GACXA,EAASD,QACTE,SAASC,SAETC,MAAM,0CAEd,EACAC,MAAO,WACHD,MAAM,0CACV,GAGZ,IAKA,IAAIO,EAAatC,SAASuC,cAAc,sCACxC,GAAKD,EAAL,CAEA,IAAIE,EAAMC,OAAOC,aAAaJ,EAAY,CACtCK,eAAgBpC,sBAAsBoC,eACtCC,kBAAkB,IAGtB1C,EAAEoC,GAAYnC,GAAG,uBAAuB,WACpC,IAAI0C,EAAcL,EAAIM,yBAElBC,EAAOF,EAAYE,KACnBC,EAAWH,EAAYG,SAEvBD,IACA7C,EAAES,MAAMsC,QAAQ,kBAAkBC,KAAK,mCAAmCC,IAAIJ,GAC9E7C,EAAES,MAAMsC,QAAQ,kBAAkBC,KAAK,oCAAoCC,IAAIH,GAE/E9C,EAAEkB,KAAK,CACHC,IAAKd,sBAAsBe,QAC3BC,KAAM,OACNC,KAAM,CACFhB,OAAQ,uCACR4C,mBAAoBJ,EACpBK,kBAAmBN,EACnBV,SAAU9B,sBAAsBE,OAEpCkB,QAAS,SAAUC,GACVA,EAASD,SACV2B,QAAQC,KAAK,qBAAsB3B,EAE3C,IAGZ,GAjCuB,CAkC3B","sources":["webpack://sage/./resources/scripts/growtype-form-profile-edit.js"],"sourcesContent":["jQuery(document).ready(function ($) {\n    $(\".growtype-form input[type='file']\").on(\"change\", function () {\n        var formData = new FormData();\n\n        formData.append(\"action\", growtypeProfileUpload.action);\n        formData.append(\"_wpnonce\", growtypeProfileUpload.nonce);\n\n        var input = this;\n        var fieldName = $(this).attr(\"name\") || \"files\"; // fallback\n\n        if (input.files && input.files.length > 0) {\n\n            $.each(input.files, function (i, file) {\n                if (fieldName.endsWith(\"[]\")) {\n                    formData.append(fieldName, file);\n                } else {\n                    formData.append(fieldName + \"[]\", file);\n                }\n\n            });\n        }\n\n        $.ajax({\n            url: growtypeProfileUpload.ajaxUrl,\n            type: \"POST\",\n            data: formData,\n            processData: false,\n            contentType: false,\n            success: function (response) {\n                if (response.success) {\n                    location.reload();\n                } else {\n                    alert(response['data']['message']);\n                }\n            },\n            error: function () {\n                alert(\"Error uploading files. Please try again.\");\n            }\n        });\n\n    });\n\n    // Handle photo removal\n    $(\".growtype-form-remove-profile-image\").on(\"click\", function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (confirm(\"Are you sure you want to remove your profile photo?\")) {\n            $.ajax({\n                url: growtypeProfileUpload.ajaxUrl,\n                type: \"POST\",\n                data: {\n                    action: \"growtype_form_remove_profile_picture\",\n                    _wpnonce: growtypeProfileUpload.nonce\n                },\n                success: function (response) {\n                    if (response.success) {\n                        location.reload();\n                    } else {\n                        alert(\"Error removing photo. Please try again.\");\n                    }\n                },\n                error: function () {\n                    alert(\"Error removing photo. Please try again.\");\n                }\n            });\n        }\n    });\n\n    /**\n     * Input type tel\n     */\n    var phoneInput = document.querySelector('.growtype-form input[name=\"phone\"]');\n    if (!phoneInput) return;\n\n    var iti = window.intlTelInput(phoneInput, {\n        initialCountry: growtypeProfileUpload.initialCountry,\n        separateDialCode: true,\n    });\n\n    $(phoneInput).on('countrychange input', function () {\n        var countryData = iti.getSelectedCountryData();\n\n        let iso2 = countryData.iso2;\n        let dialCode = countryData.dialCode;\n\n        if (iso2) {\n            $(this).closest('.growtype-form').find('input[name=\"phone_country_iso\"]').val(iso2);\n            $(this).closest('.growtype-form').find('input[name=\"phone_country_code\"]').val(dialCode);\n\n            $.ajax({\n                url: growtypeProfileUpload.ajaxUrl,\n                type: \"POST\",\n                data: {\n                    action: \"growtype_form_profile_edit_form_data\",\n                    phone_country_code: dialCode,  // e.g. \"1\"\n                    phone_country_iso: iso2,      // e.g. \"us\"\n                    _wpnonce: growtypeProfileUpload.nonce\n                },\n                success: function (response) {\n                    if (!response.success) {\n                        console.warn(\"Phone save failed:\", response);\n                    }\n                }\n            });\n        }\n    });\n});\n"],"names":["jQuery","document","ready","$","on","formData","FormData","append","growtypeProfileUpload","action","nonce","input","this","fieldName","attr","files","length","each","i","file","endsWith","ajax","url","ajaxUrl","type","data","processData","contentType","success","response","location","reload","alert","error","e","preventDefault","stopPropagation","confirm","_wpnonce","phoneInput","querySelector","iti","window","intlTelInput","initialCountry","separateDialCode","countryData","getSelectedCountryData","iso2","dialCode","closest","find","val","phone_country_code","phone_country_iso","console","warn"],"sourceRoot":""}